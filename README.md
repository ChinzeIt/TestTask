# Документация модуля **hatch_generator**

## Введение

**hatch_generator** — это модуль для генерации штриховки (hatching) внутри заданного контура, представляющего собой квадрат или прямоугольник.

Программа получает параметры направления и шага штриховки, затем принимает точки контура и вычисляет линии штриховки внутри него.

---

## Работа программы

### Запуск

Программа запускается командой:

```
./hatch_generator --angle num --step num
```

Где:

* `num` — неотрицательное число (вещественное или целое),
* `--angle` — угол наклона линий штриховки (в градусах),
* `--step` — шаг между линиями.

### Ввод данных

После запуска программа ожидает ввод **четырёх точек** — координат контура.
Можно вводить **несколько контуров**, каждый из четырёх точек.

Если значение введено неправильно — программа попросит повторить ввод точки.

Если аргументы командной строки указаны неверно — программа не запустится.

### Вывод данных

После успешного ввода всех данных программа выводит результат — список линий штриховки (их координаты) в текстовом виде.

---

## Файловое расположение

Структура проекта:

```
src/
  struct.h           — структуры данных
  parser.h/.cpp      — класс Parser
  out.h/.cpp         — класс Out
  generation.h/.cpp  — класс Generation

build/               — директория для сборки (создать вручную, git игнорирует)
CMakeLists.txt       — конфигурация сборки
```

---

## Содержание кода

### **struct.h**

Содержит определения структур:

* **Point** — хранит координаты точки контура:

  * `double x`
  * `double y`
* **Line** — хранит линию штриховки:

  * `Point a` — начало
  * `Point b` — конец

---

## parser.h / parser.cpp

Класс **Parser** отвечает за ввод данных.

### Основные методы:

#### `input(argc, argv)`

Обработчик аргументов командной строки.
Проверяет:

* наличие флагов `--angle` и `--step`,
* корректность значений.

#### `massive()`

Обработчик ввода точек контура.

* Ждёт 4 строки ввода,
* Проверяет формат,
* Позволяет вводить несколько контуров.

#### `getPoints()`

Возвращает все введённые контуры.

---

## generation.h / generation.cpp

Класс **Generation** отвечает за вычисление штриховки внутри контуров.

### Основной метод:

#### `generate()`

Создаёт линии штриховки для всех контуров, используя вспомогательные функции.

### Метод получения результата:

#### `getLines()`

Возвращает список всех линий штриховки.

### Вспомогательные методы:

#### `transRaduisToRadian`

Перевод угла из градусов в радианы.

#### `rotatePoint`

Поворачивает точку на заданный угол.
Используется для выравнивания контура горизонтально.

#### `rotatePointBack`

Возвращает точку на исходный угол.

#### `segHorizontal`

Проверяет, пересекает ли горизонтальная линия (уровень `y = hy`) отрезок, заданный двумя точками.
Возвращает:

* `false` — если нет пересечения,
* `true` и координату пересечения `x` — если пересечение есть.

#### `generateForContour`

Основной алгоритм генерации штриховки для одного контура:

1. Поворачивает контур так, чтобы линии можно было генерировать горизонтально.
2. Находит **минимальный и максимальный Y** — границы генерации линий.
3. Идёт по Y с заданным шагом.
4. Для каждого уровня находит пересечения с контуром.
5. Каждую пару пересечений превращает в линию (отрезок).
6. Поворачивает получившиеся линии обратно.
7. Сохраняет линии в общий список.

---

## out.h / out.cpp

Класс **Out** содержит метод:

### `printRes`

Выводит результат программы в текстовом виде: координаты всех линий штриховки.

---

## Сборка программы

Перейдите в директорию `build`:

```
cd build
```

Запустите генерацию Make-файла:

```
cmake ..
```

Соберите проект:

```
make
```

Теперь можно запускать программу:

```
./hatch_generator --angle 45 --step 5
```

---
